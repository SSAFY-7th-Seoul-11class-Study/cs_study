```
스케줄링 예상질문

1. 스케줄링이란?
2. CPU 스케줄링이란?
3. CPU 스케줄링이 발생하는 시점은?
4. CPU 관점에서 CPU 스케줄링을 평가하기 위한 기준은?
5. 프로세스 관점에서 CPU 스케줄링을 평가하기 위한 기준은?
6. 비선점형 스케줄링을 설명하세요
7. 선점형 스케줄링을 설명하세요
8. 기아상태를 설명하고 기아상태를 방지하기 위해 사용되는 기술은?
9. 에이징을 설명하고 에이징 기법을 도입한 알고리즘은?
10. 콘보이 현상(convoy effect)이란 무엇이고, 콘보이 현상이 발생될 수 있는 알고리즘은?
11. 디스패처란?
12. 문맥교환이란?
```

## 스케줄링(Process scheduling)이란?

프로세스가 생성되어 실행될 때 필요한 시스템의 여러 자원을 해당 프로세스에게 할당하는 작업을 말합니다.

### 스케줄링의 종류

- 장기 스케줄링 - 어떤 프로세스가 CPU(시스템 자원)를 차지할 수 있는지 결정해서 Ready Queue에 보내는 작업.
- 중기 스케줄링 - 어떤 프로세스들이 메모리를 할당받을 것인지 결정하는 작업
- 단기 스케줄링 - 프로세스 실행을 위해 언제 CPU에 어떤 프로세스를 할당할 것인지 결정하는 작업.

---

## CPU Scheduling이란?

CPU가 동시에 여러 프로세스를 처리할 수 없기 때문에, 한 순간에 어떤 프로세스가 CPU를 사용할 수 있게 하는지 결정.

효율적으로 사용하기 위하여 최대한 CPU 이용률은 높이고, 주어진 시간에 많은 일을 하고, 응답시간을 최소화하는 것을 목표로 합니다.

### Dispatcher란?

스케줄링을 위해 CPU 제어권을 선택된 프로세스에게 넘겨주는 모듈

실질적으로 프로세서를 할당하는 역할

### CPU Scheduling의 평가 기준

> CPU 관점

1. CPU utilization : 작업을 처리하는 시간의 비율
2. throughput : 단위 시간당 프로세스를 처리하는 비율

> process 관점

1. Turnaround time : 프로세스가 생성되고 실행이 끝날 때까지 걸리는 시간
2. Waiting time : Ready Queue에서 CPU 사용을 기다리는 시간의 총합
3. Response time : 프로세스가 생성되고 Ready Queue에 들어가서 처음으로 CPU를 얻기까지 걸리는 시간

### 프로세스의 상태

![프로세스상태](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/567bad21-c0cf-4d14-867c-3ff38b8a5083/Untitled.png)

### CPU Scheduling 발생

- Running에서 Waiting상태로 전환될 때 - 비선점
- Running에서 Ready로 전환될 때 - 선점
- Waiting에서 Ready로 전환될 때 - 선점
- 프로세스가 종료될 때 - 선점, 비선점

### CPU Scheduling 종류

1. 비선점형(non-preemptive)

   다른 프로세스가 CPU 제어권을 강제로 빼앗을 수 없고, 프로세스 스스로가 CPU 제어권을 포기하는 방식입니다.

   _알고리즘_

   - FCFS(First Come First Serve) - 가장 먼저 온 것을 가장 먼저 처리하는 알고리즘 입니다. 길게 수행되는 프로세스 때문에 준비상태 큐에서 오래 기다리는 현상(convoy effect)이 발생하는 단점이 있습니다.
   - SJF(Shortest Job First) - 실행시간이 가장 짧은 프로세스를 가장 먼저 실행하는 알고리즘입니다. 평균 대기 시간이 가장 짧은 최적 알고리즘이지만 긴 시간을 가진 프로세스가 CPU를 할당받지 못하고 무한히 대기하는 기아현상이 발생하는 단점이 있습니다. 실제로 실행 시간을 알 수 없기 때문에 과거의 실행했던 시간을 토대로 추측해서 사용합니다.
   - HRN(Highest Response ratio) : 실행시간이 긴 프로세스에 불리한 SJF 알고리즘을 보완하기 위해 우선순위 계산 결과 값이 높은 것부터 우선순위가 부여됩니다. 대기시간이 길수록 계산 결과가 높습니다.
   - 우선순위 : 각 프로세스마다 우선순위를 부여하여 가장 높은 프로세스에서 먼저 CPU를 할당하는 기법.

2. 선점 스케줄링(preemptive)

   하나의 프로세스가 CPU를 할당받아 실행하고 있을 때 우선순위가 높은 프로세스가 CPU를 강제로 빼앗아 사용할 수 있는 스케줄링 기법입니다. CPU 소유권이 변경될 때 문맥교환이 일어나게 되면서 많은 오버헤드가 발생하는 단점이 있습니다.

   _알고리즘_

   - SRT(Shortest Remaining Time) : 현재 실행 중인 프로세스의 남은 시간과 대기 큐에 프로세스의 실행시간을 비교하여 가장 짧은 프로세스에게 CPU를 할당하는 기법입니다. 잦은 선점으로 인해 문맥교환이 많이 일어나게 됩니다.
   - 선점 우선순위 : Ready Queue의 프로세스들 중에서 우선순위가 가장 높은 프로세스에게 먼저 CPU를 할당하는 기법입니다.
   - RR(Round-Robin) : 시분할 시스템을 위해 고안된 방법으로, 대기 큐를 사용하여 먼저 대기한 작업이 먼저 CPU를 사용합니다. 할당되는 시간이 클 경우 FCFS 기법과 같아지고, 시간이 작을 경우 문맥교환이 잦아져 오버헤드가 커집니다.
   - MLQ(Multi-level Queue, 다단계 큐) : 프로세스를 특정 그룹으로 분류할 수 있는 경우 Ready Queue를 여러 개로 분할하여 각각의 Queue가 독립적인 스케줄링 알고리즘을 가지는 기법입니다.
   - MLFQ(Multi-level Feedback Queue, 다단계 피드백 큐) : Multi-level Queue와 같지만 프로세스가 다른 Ready Queue로 이동이 가능한 기법입니다. 새로운 프로세스는 높은 우선순위를 가지고, 프로세스 실행이 길어질수록 낮은 우선순위 큐로 이동합니다. Aging 방법을 이와 같은 방식으로 구현할 수 있습니다.

### Starvation

특정 프로세스의 우선순위가 낮아서 원하는 자원을 계속 할당받지 못하는 상태.

### Aging

특정 프로세스의 우선순위가 낮아서 무한정 기다리는 경우를 방지하기 위해서 우선순위를 높여주는 기법이다.

예) HRN, MLFQ

### Convoy Effect

작업 시간이 긴 프로세스가 먼저 큐에 도착해서 다른 프로세스의 실행 시간이 전부 늦춰져 효율성을 떨어뜨리는 현상

- 비선점형 스케줄링인 FCFS 스케줄링에서 콘보이 현상이 발생할 수 있음.
